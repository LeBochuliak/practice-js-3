import{a as l}from"./vendor-uumJaN6-.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const m=document.querySelector(".categories"),p=document.querySelector(".products"),y=document.querySelector(".not-found"),O=document.querySelector(".modal__content"),q=document.querySelector(".modal"),x=document.querySelector(".search-form"),g=document.querySelector(".load-more-btn"),_=document.querySelector(".modal-product__btn--cart"),H=document.querySelector("[data-cart-count]"),L=document.querySelector(".modal-product__btn--wishlist"),M=document.querySelector("[data-wishlist-count]"),U=document.querySelector(".cart-summary"),s=document.querySelector(".loader"),N=document.querySelector(".category-all"),$=document.querySelector(".modal-loader");function E(t){const e=`<li class='categories__item'>   
                  <button type='button' class='categories__btn'>${t}</button>
        </li>`;return m.insertAdjacentHTML("beforeend",e)}function f(t,e){e!=="all"&&(t=t.filter(c=>c.category===e));const o=t.map(({id:c,images:r,title:a,brand:d,category:b,price:v})=>`<li class="products__item" data-id="${c}">
    <img class="products__image" src="${r[0]}" alt="${a}"/>
    <p class="products__title">${a}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${d}</span></p>
    <p class="products__category">Category: ${b}</p>
    <p class="products__price">Price: ${v}$</p>
 </li>`).join("");p.insertAdjacentHTML("beforeend",o)}function j({id:t,images:e,title:o,price:c,tags:r,description:a,shippingInformation:d,returnPolicy:b}){const v=r.map(T=>`<li><p>${T}</p></li>`).join(""),A=`<div class="js-modal-product-container" data-id=${t}>
            <img class="modal-product__img" src="${e[0]}" alt="${o}" />
            <div class="modal-product__content">
                <p class="modal-product__title">${o}</p>
                <ul class="modal-product__tags">${v}</ul>
                <p class="modal-product__description">${a}</p>
                <p class="modal-product__shipping-information">Shipping: ${d}</p>
                <p class="modal-product__return-policy">Return Policy: ${b}</p>
                <p class="modal-product__price">Price: ${c}$</p>
            </div>
        </div>
        
`;O.insertAdjacentHTML("beforeend",A)}const n={page:1},i={products:JSON.parse(localStorage.getItem("cart"))||[],totalPrice:0},u={products:JSON.parse(localStorage.getItem("wishlist"))||[]};l.defaults.baseURL="https://dummyjson.com/products";function R(){setTimeout(()=>{N.classList.remove("hidden-category-all")},300),s.classList.remove("hidden"),l.get("/category-list").then(t=>t.data.forEach(e=>{E(e)})).catch(t=>{console.error("Error loading categories data:",t),alert("Unfortunately, the categories data could not be loaded. Please try again later.")}).finally(()=>s.classList.add("hidden"))}function S(){s.classList.remove("hidden"),l.get(`?limit=12&skip=${(n.page-1)*12}`).then(t=>{g.classList.add("is-hidden"),f(t.data.products,"all"),Math.ceil(t.data.total/12)>n.page&&g.classList.remove("is-hidden")}).catch(t=>{console.error("Error loading products data:",t),alert("Unfortunately, the products data could not be loaded. Please try again later.")}).finally(()=>s.classList.add("hidden"))}function P(t){s.classList.remove("hidden"),l.get(`/category/${t}?limit=12&skip=${(n.page-1)*12}`).then(e=>{if(g.classList.add("is-hidden"),e.data.products.length===0){y.classList.add("not-found--visible");return}y.classList.remove("not-found--visible"),f(e.data.products,t),Math.ceil(e.data.total/12)>n.page&&g.classList.remove("is-hidden")}).catch(e=>{console.error("Error loading category data:",e),alert("Unfortunately, the category data could not be loaded. Please try again later.")}).finally(()=>s.classList.add("hidden"))}function I(t){$.classList.remove("hidden"),l.get(`/${t}`).then(e=>j(e.data)).catch(e=>{console.error("Error loading product data:",e),alert("Unfortunately, the product data could not be loaded. Please try again later.")}).finally(()=>$.classList.add("hidden"))}function C(t){s.classList.remove("hidden"),l.get(`/search?q=${t}&limit=12&skip=${(n.page-1)*12}`).then(e=>{if(g.classList.add("is-hidden"),e.data.products.length===0){y.classList.add("not-found--visible");return}y.classList.remove("not-found--visible"),f(e.data.products,"all"),Math.ceil(e.data.total/12)>n.page&&g.classList.remove("is-hidden")}).catch(e=>{console.error("Error loading products data:",e),alert("Unfortunately, the products data could not be loaded. Please try again later.")}).finally(()=>s.classList.add("hidden"))}async function V(t){s.classList.remove("hidden");try{const e=t.map(r=>l.get(`/${r}`)),c=(await Promise.all(e)).map(r=>r.data);f(c,"all"),s.classList.add("hidden")}catch(e){console.error("Error",e),s.classList.add("hidden")}}async function k(t){s.classList.remove("hidden");try{i.totalPrice=0;const e=t.map(r=>l.get(`/${r}`)),c=(await Promise.all(e)).map(r=>r.data);i.totalPrice=c.reduce((r,a)=>r+a.price,0),f(c,"all"),s.classList.add("hidden")}catch(e){console.error("Error",e),s.classList.add("hidden")}}function w(){m.querySelector(".categories__btn").textContent==="all"&&m.querySelector(".categories__btn").classList.add("categories__btn--active")}function D(t){const e=t.target.closest("form").querySelector(".search-form__input");t.target.classList.contains("search-form__btn-clear")&&(n.page=1,e.value="",p.innerHTML="",window.location.pathname.endsWith("index.html")&&(m.querySelectorAll(".categories__btn").forEach(o=>o.classList.remove("categories__btn--active")),w()),S())}function B(t){if(i.products.includes(t)){_.textContent="Remove from Cart";return}_.textContent="Add to Cart"}function J(t){if(u.products.includes(t)){L.textContent="Remove from Wishlist";return}L.textContent="Add to Wishlist"}function h(){let t,e;try{t=JSON.parse(localStorage.getItem("cart")),Array.isArray(t)||(t=[])}catch{t=[]}try{e=JSON.parse(localStorage.getItem("wishlist")),Array.isArray(e)||(e=[])}catch{e=[]}H.textContent=t.length,M.textContent=e.length}function F(t){if(t.preventDefault(),t.currentTarget.elements.searchValue.value.trim()===""){alert("Please, enter a search term!");return}localStorage.setItem("searchValue",JSON.stringify(t.currentTarget.elements.searchValue.value)),window.location.href="./search.html"}function K(t){if(t.target.classList.contains("modal__close-btn")&&(q.classList.remove("modal--is-open"),q.querySelector(".js-modal-product-container").remove()),t.target.classList.contains("modal-product__btn--cart")){const e=t.currentTarget.querySelector(".js-modal-product-container").dataset.id;if(i.products.includes(e)){i.products=i.products.filter(o=>o!==e),localStorage.setItem("cart",JSON.stringify(i.products)),h(),_.textContent="Add to Cart";return}i.products.push(e),localStorage.setItem("cart",JSON.stringify(i.products)),h(),_.textContent="Remove from Cart"}if(t.target.classList.contains("modal-product__btn--wishlist")){const e=t.currentTarget.querySelector(".js-modal-product-container").dataset.id;if(u.products.includes(e)){u.products=u.products.filter(o=>o!==e),localStorage.setItem("wishlist",JSON.stringify(u.products)),h(),L.textContent="Add to Wishlist";return}u.products.push(e),localStorage.setItem("wishlist",JSON.stringify(u.products)),h(),L.textContent="Remove from Wishlist"}}function z(t){if(t.target.tagName==="BUTTON"){if(n.page=1,m.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active"),t.target.textContent==="all"){p.innerHTML="",S();return}p.innerHTML="",P(t.target.textContent)}}function G(t){const e=t.target.closest("li");e&&(B(e.dataset.id),J(e.dataset.id),I(e.dataset.id),q.classList.add("modal--is-open"))}function Q(t){if(t.preventDefault(),n.page=1,t.target.elements.searchValue.value.trim()===""){alert("Please, enter a search term!"),p.innerHTML="",S();return}window.location.pathname.endsWith("index.html")&&(m.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),w()),p.innerHTML="",C(t.target.elements.searchValue.value)}function X(){if(n.page++,window.location.pathname.endsWith("index.html")){const t=document.querySelector(".categories__btn--active").textContent;if(t!=="all"){P(t);return}}if(x.querySelector("input")!==""){C(x.querySelector("input").value);return}S()}function Y(t){if(n.page=1,t.trim()===""){alert("Please, enter a search term!");return}p.innerHTML="",C(t)}export{G as a,K as b,h as c,Q as d,D as e,x as f,F as g,X as h,R as i,S as j,w as k,g as l,q as m,m as n,z as o,p,k as q,U as r,Y as s,i as t,V as w};
//# sourceMappingURL=handlers-Cav2wBhR.js.map
