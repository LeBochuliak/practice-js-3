import{a as i}from"./vendor-uumJaN6-.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const u=document.querySelector(".categories"),p=document.querySelector(".products"),y=document.querySelector(".not-found"),w=document.querySelector(".modal__content"),C=document.querySelector(".modal"),q=document.querySelector(".search-form"),m=document.querySelector(".load-more-btn"),h=document.querySelector(".modal-product__btn--cart"),O=document.querySelector("[data-cart-count]"),_=document.querySelector(".modal-product__btn--wishlist"),T=document.querySelector("[data-wishlist-count]"),I=document.querySelector(".cart-summary");function M(e){const t=`<li class='categories__item'>   
                  <button type='button' class='categories__btn'>${e}</button>
        </li>`;return u.insertAdjacentHTML("beforeend",t)}function g(e,t){t!=="all"&&(e=e.filter(s=>s.category===t));const a=e.map(({id:s,images:r,title:o,brand:l,category:S,price:L})=>`<li class="products__item" data-id="${s}">
    <img class="products__image" src="${r[0]}" alt="${o}"/>
    <p class="products__title">${o}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${l}</span></p>
    <p class="products__category">Category: ${S}</p>
    <p class="products__price">Price: ${L}$</p>
 </li>`).join("");p.insertAdjacentHTML("beforeend",a)}function E({id:e,images:t,title:a,price:s,tags:r,description:o,shippingInformation:l,returnPolicy:S}){const L=r.map(A=>`<li><p>${A}</p></li>`).join(""),P=`<div class="js-modal-product-container" data-id=${e}>
            <img class="modal-product__img" src="${t[0]}" alt="${a}" />
            <div class="modal-product__content">
                <p class="modal-product__title">${a}</p>
                <ul class="modal-product__tags">${L}</ul>
                <p class="modal-product__description">${o}</p>
                <p class="modal-product__shipping-information">Shipping: ${l}</p>
                <p class="modal-product__return-policy">Return Policy: ${S}</p>
                <p class="modal-product__price">Price: ${s}$</p>
                <button class="modal-product__buy-btn" type="button">Buy</button>
            </div>
        </div>
        
`;w.insertAdjacentHTML("beforeend",P)}const c={page:1},n={products:JSON.parse(localStorage.getItem("cart"))||[],totalPrice:0},d={products:JSON.parse(localStorage.getItem("wishlist"))||[]};i.defaults.baseURL="https://dummyjson.com/products";function J(){i.get("/category-list").then(e=>e.data.forEach(t=>{M(t)})).catch(e=>{console.error("Error loading categories data:",e),alert("Unfortunately, the categories data could not be loaded. Please try again later.")})}function b(){i.get(`?limit=12&skip=${(c.page-1)*12}`).then(e=>{m.classList.add("is-hidden"),g(e.data.products,"all"),Math.ceil(e.data.total/12)>c.page&&m.classList.remove("is-hidden")}).catch(e=>{console.error("Error loading products data:",e),alert("Unfortunately, the products data could not be loaded. Please try again later.")})}function $(e){i.get(`/category/${e}?limit=12&skip=${(c.page-1)*12}`).then(t=>{if(m.classList.add("is-hidden"),t.data.products.length===0){y.classList.add("not-found--visible");return}y.classList.remove("not-found--visible"),g(t.data.products,e),Math.ceil(t.data.total/12)>c.page&&m.classList.remove("is-hidden")}).catch(t=>{console.error("Error loading category data:",t),alert("Unfortunately, the category data could not be loaded. Please try again later.")})}function H(e){i.get(`/${e}`).then(t=>E(t.data)).catch(t=>{console.error("Error loading product data:",t),alert("Unfortunately, the product data could not be loaded. Please try again later.")})}function v(e){i.get(`/search?q=${e}&limit=12&skip=${(c.page-1)*12}`).then(t=>{if(m.classList.add("is-hidden"),t.data.products.length===0){y.classList.add("not-found--visible");return}y.classList.remove("not-found--visible"),g(t.data.products,"all"),Math.ceil(t.data.total/12)>c.page&&m.classList.remove("is-hidden")}).catch(t=>{console.error("Error loading products data:",t),alert("Unfortunately, the products data could not be loaded. Please try again later.")})}async function U(e){try{const t=e.map(r=>i.get(`/${r}`)),s=(await Promise.all(t)).map(r=>r.data);g(s,"all")}catch(t){console.error("Error",t)}}async function R(e){try{n.totalPrice=0;const t=e.map(r=>i.get(`/${r}`)),s=(await Promise.all(t)).map(r=>r.data);n.totalPrice=s.reduce((r,o)=>r+o.price,0),g(s,"all")}catch(t){console.error("Error",t)}}function x(){u.querySelector(".categories__btn").textContent==="all"&&u.querySelector(".categories__btn").classList.add("categories__btn--active")}function W(e){const t=e.target.closest("form").querySelector(".search-form__input");e.target.classList.contains("search-form__btn-clear")&&(c.page=1,t.value="",p.innerHTML="",u.querySelectorAll(".categories__btn").forEach(a=>a.classList.remove("categories__btn--active")),x(),b())}function N(e){if(n.products.includes(e)){h.textContent="Remove from Cart";return}h.textContent="Add to Cart"}function j(e){if(d.products.includes(e)){_.textContent="Remove from Wishlist";return}_.textContent="Add to Wishlist"}function f(){let e,t;try{e=JSON.parse(localStorage.getItem("cart")),Array.isArray(e)||(e=[])}catch{e=[]}try{t=JSON.parse(localStorage.getItem("wishlist")),Array.isArray(t)||(t=[])}catch{t=[]}O.textContent=e.length,T.textContent=t.length}function k(e){if(e.target.classList.contains("modal__close-btn")&&(C.classList.remove("modal--is-open"),C.querySelector(".js-modal-product-container").remove()),e.target.classList.contains("modal-product__btn--cart")){const t=e.currentTarget.querySelector(".js-modal-product-container").dataset.id;if(n.products.includes(t)){n.products=n.products.filter(a=>a!==t),localStorage.setItem("cart",JSON.stringify(n.products)),f(),h.textContent="Add to Cart";return}n.products.push(t),localStorage.setItem("cart",JSON.stringify(n.products)),f(),h.textContent="Remove from Cart"}if(e.target.classList.contains("modal-product__btn--wishlist")){const t=e.currentTarget.querySelector(".js-modal-product-container").dataset.id;if(d.products.includes(t)){d.products=d.products.filter(a=>a!==t),localStorage.setItem("wishlist",JSON.stringify(d.products)),f(),_.textContent="Add to Wishlist";return}d.products.push(t),localStorage.setItem("wishlist",JSON.stringify(d.products)),f(),_.textContent="Remove from Wishlist"}}function F(e){if(e.target.tagName==="BUTTON"){if(c.page=1,u.querySelectorAll(".categories__btn").forEach(t=>t.classList.remove("categories__btn--active")),e.target.classList.add("categories__btn--active"),e.target.textContent==="all"){p.innerHTML="",b();return}p.innerHTML="",$(e.target.textContent)}}function V(e){const t=e.target.closest("li");t&&(N(t.dataset.id),j(t.dataset.id),H(t.dataset.id),C.classList.add("modal--is-open"))}function D(e){if(e.preventDefault(),c.page=1,e.target.elements.searchValue.value.trim()===""){alert("Please, enter a search term!"),p.innerHTML="",b();return}u.querySelectorAll(".categories__btn").forEach(t=>t.classList.remove("categories__btn--active")),x(),p.innerHTML="",v(e.target.elements.searchValue.value)}function K(){const e=document.querySelector(".categories__btn--active").textContent;if(c.page++,e!=="all"){$(e);return}if(q.querySelector("input")!==""){v(q.querySelector("input").value);return}b()}export{V as a,k as b,f as c,J as d,b as e,x as f,u as g,F as h,q as i,W as j,K as k,m as l,C as m,R as n,I as o,p,n as q,D as s,U as w};
//# sourceMappingURL=handlers-Mz18Kr9x.js.map
