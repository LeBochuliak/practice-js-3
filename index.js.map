{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/render-function.js","../src/js/constants.js","../src/js/products-api.js","../src/js/helpers.js","../src/js/handlers.js","../src/js/modal.js","../src/home.js"],"sourcesContent":["// обʼєкт refs з посиланнями на елементи ДОМ.\n\nexport const categoriesList = document.querySelector('.categories');\nexport const productsList = document.querySelector('.products');\nexport const emptyContainer = document.querySelector('.not-found');\nexport const modalContentContainer = document.querySelector('.modal__content');\nexport const modalConteiner = document.querySelector('.modal');\nexport const formEl = document.querySelector('.search-form');\nexport const loadMoreBtn = document.querySelector('.load-more-btn');","// функції для відображення елементів інтерфейсу.\nimport { categoriesList, productsList, modalContentContainer } from \"./refs\";\n\nexport function renderCategoriesList(nameCategory) {\n    const markup = `<li class='categories__item'>   \n                  <button type='button' class='categories__btn'>${nameCategory}</button>\n        </li>`;\n    return categoriesList.insertAdjacentHTML('beforeend', markup);\n    \n}\n\nexport function renderProductsList(products, category) {\n    if (category !== \"all\") {\n        products = products.filter(el => el.category === category);\n    }\n    const markup = products.map(({id, images, title, brand, category, price}) => {\n\n        return `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${images[0]}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`;\n    }).join(\"\");\n    productsList.insertAdjacentHTML('beforeend', markup);\n};\n\nexport function renderProduct({images, title, price, tags, description, shippingInformation, returnPolicy}) {\n    const markupTags = tags.map(el => `<li><p>${el}</p></li>`).join(\"\");\n    const markup =  \n        `<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${title}\" />\n            <div class=\"modal-product__content\">\n                <p class=\"modal-product__title\">${title}</p>\n                <ul class=\"modal-product__tags\">${markupTags}</ul>\n                <p class=\"modal-product__description\">${description}</p>\n                <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n                <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n                <p class=\"modal-product__price\">Price: ${price}$</p>\n                <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n            </div>\n`;\n    modalContentContainer.insertAdjacentHTML('beforeend', markup)\n}","// константи, які будуть використовуватись в роботі.\n\nexport const currentPage = {\n    page: 1\n};\n\n\nexport const formSubmitted = {\n    status: false,\n\n    setFormSubmitted(value) {\n    this.status = value;\n    return this.status;\n    },\n\n    getFormSubmitted() {\n    return this.status;\n    }\n}\n\n","// функції для запитів на бекенд.\n\nimport axios from 'axios';\nimport { renderCategoriesList, renderProductsList, renderProduct } from './render-function';\nimport { emptyContainer, loadMoreBtn } from './refs';\nimport { currentPage } from './constants';\n\naxios.defaults.baseURL = 'https://dummyjson.com/products';\n\nexport function categoriesAxios() {\n    axios.get('/category-list')\n    .then(response => response.data.forEach(el => {\n        renderCategoriesList(el);\n    }))\n    .catch(error => {\n            console.error('Error loading categories data:', error);\n            alert('Unfortunately, the categories data could not be loaded. Please try again later.');\n        })\n};\n\nexport function productsListAxios() {\n    axios.get(`?limit=12&skip=${(currentPage.page - 1)* 12}`)\n        .then(response => {\n            loadMoreBtn.classList.add('is-hidden');\n            renderProductsList(response.data.products, 'all');\n            let pages = Math.ceil(response.data.total / 12);\n            if (pages > currentPage.page) {\n                loadMoreBtn.classList.remove('is-hidden')\n            }\n        })\n        .catch(error => {\n            console.error('Error loading products data:', error);\n            alert('Unfortunately, the products data could not be loaded. Please try again later.');\n        })\n        \n};\n\nexport function categoryAxios(category) {\n    axios.get(`/category/${category}?limit=12&skip=${(currentPage.page - 1)* 12}`)\n        .then(response => { \n            loadMoreBtn.classList.add('is-hidden');\n            if (response.data.products.length === 0) {\n                emptyContainer.classList.add('not-found--visible');\n                return;\n            };\n            emptyContainer.classList.remove('not-found--visible');\n            renderProductsList(response.data.products, category); \n            let pages = Math.ceil(response.data.total / 12);\n            if (pages > currentPage.page) {\n                loadMoreBtn.classList.remove('is-hidden')\n            }        \n        })\n        .catch(error => {\n            console.error('Error loading category data:', error);\n            alert('Unfortunately, the category data could not be loaded. Please try again later.');\n        })\n};\n\nexport function productAxios(id) {\n    axios.get(`/${id}`)\n        .then(response => renderProduct(response.data))\n        .catch(error => {\n            console.error('Error loading product data:', error);\n            alert('Unfortunately, the product data could not be loaded. Please try again later.');\n        })\n        \n};\n\nexport function searchAxios(value) {\n    axios.get(`/search?q=${value}&limit=12&skip=${(currentPage.page - 1)* 12}`)\n        .then(response => {\n            loadMoreBtn.classList.add('is-hidden');\n            if (response.data.products.length === 0) {\n                emptyContainer.classList.add('not-found--visible');\n                return;\n            }\n            emptyContainer.classList.remove('not-found--visible');\n            renderProductsList(response.data.products, 'all');\n            let pages = Math.ceil(response.data.total / 12);\n            if (pages > currentPage.page) {\n                loadMoreBtn.classList.remove('is-hidden')\n            } \n        })\n        .catch(error => {\n            console.error('Error loading products data:', error);\n            alert('Unfortunately, the products data could not be loaded. Please try again later.');\n        })\n\n}","// допоміжні функції, які знадобляться для реалізації завдання\nimport { categoriesList, productsList } from \"./refs\";\nimport { productsListAxios } from \"./products-api\";\nimport { currentPage } from \"./constants\";\n\nexport function defaultCategory() {\n   if(categoriesList.querySelector('.categories__btn').textContent === 'all'){\n        categoriesList.querySelector('.categories__btn').classList.add('categories__btn--active');\n   } \n}\n\nexport function clearSearchBtn(event) {\n   const input = event.target.closest('form').querySelector('.search-form__input');\n   currentPage.page = 1;\n   if (event.target.classList.contains('search-form__btn-clear')) {\n      input.value = '';\n      productsList.innerHTML = '';\n      productsListAxios();\n   }\n}","// хендлери, які передаються в addEventListener.\nimport { categoriesList, productsList, modalConteiner, formEl } from \"./refs\";\nimport { productsListAxios, categoryAxios, productAxios, searchAxios } from \"./products-api\";\nimport { currentPage } from \"./constants\";\nimport { defaultCategory } from \"./helpers\";\n\nexport function categoryProductsHandler(event) {\n    if (event.target.tagName !== 'BUTTON') {\n        return;\n    }\n    currentPage.page = 1;\n    categoriesList.querySelectorAll('.categories__btn').forEach((el) => el.classList.remove('categories__btn--active'));\n    \n    event.target.classList.add('categories__btn--active');\n    if (event.target.textContent === 'all') {\n        productsList.innerHTML = '';\n        productsListAxios();\n        return;\n    }\n    \n    productsList.innerHTML = '';\n    categoryAxios(event.target.textContent);\n};\n\nexport function productHandler(event) {\n    const li = event.target.closest('li');\n    if (!li) return;\n    productAxios(li.dataset.id);   \n    modalConteiner.classList.add('modal--is-open');\n}\n\nexport function searchHandler(event) {\n    event.preventDefault();\n    currentPage.page = 1;\n    if (event.target.elements.searchValue.value.trim() === '') {\n        alert('Please, enter a search term!');\n        productsList.innerHTML = '';\n        productsListAxios();\n        return;\n    } \n    categoriesList.querySelectorAll('.categories__btn').forEach((el) => el.classList.remove('categories__btn--active'));\n    defaultCategory();\n    productsList.innerHTML = '';\n    searchAxios(event.target.elements.searchValue.value); \n};\n\nexport function loadMoreHandler() {\n    const category = document.querySelector('.categories__btn--active').textContent;\n    currentPage.page ++;\n    if (category !== 'all') {\n        categoryAxios(category);\n        return;\n    };\n    if (formEl.querySelector('input') !== '') {\n        searchAxios(formEl.querySelector('input').value);\n        return;\n    }\n    productsListAxios();\n}\n","// функції модального вікна (відкриття, закриття і так далі).\nimport { modalConteiner } from \"./refs\";\n\nexport function modalHandler(event) {\n    if(event.target.classList.contains('modal__close-btn')) {\n        modalConteiner.classList.remove('modal--is-open');\n    };\n}","//Логіка сторінки Home\n\nimport { categoriesAxios, productsListAxios } from \"./js/products-api\";\nimport { categoriesList, productsList, modalConteiner, formEl, loadMoreBtn } from \"./js/refs\";\nimport { defaultCategory, clearSearchBtn } from \"./js/helpers\";\nimport { categoryProductsHandler, productHandler, searchHandler, loadMoreHandler} from \"./js/handlers\";\nimport { modalHandler } from \"./js/modal\";\n\ncategoriesAxios();\nproductsListAxios();\ndefaultCategory();\n\n\ncategoriesList.addEventListener('click', categoryProductsHandler);\n\nproductsList.addEventListener('click', productHandler);\n\nmodalConteiner.addEventListener('click', modalHandler);\n\nformEl.addEventListener('submit', searchHandler);\n\nformEl.addEventListener('click', clearSearchBtn);\n\nloadMoreBtn.addEventListener('click', loadMoreHandler);"],"names":["categoriesList","productsList","emptyContainer","modalContentContainer","modalConteiner","formEl","loadMoreBtn","renderCategoriesList","nameCategory","markup","renderProductsList","products","category","el","id","images","title","brand","price","renderProduct","tags","description","shippingInformation","returnPolicy","markupTags","currentPage","axios","categoriesAxios","response","error","productsListAxios","categoryAxios","productAxios","searchAxios","value","defaultCategory","clearSearchBtn","event","input","categoryProductsHandler","productHandler","li","searchHandler","loadMoreHandler","modalHandler"],"mappings":"oFAEO,MAAMA,EAAiB,SAAS,cAAc,aAAa,EACrDC,EAAe,SAAS,cAAc,WAAW,EACjDC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAwB,SAAS,cAAc,iBAAiB,EAChEC,EAAiB,SAAS,cAAc,QAAQ,EAChDC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAc,SAAS,cAAc,gBAAgB,ECL3D,SAASC,EAAqBC,EAAc,CAC/C,MAAMC,EAAS;AAAA,kEAC+CD,CAAY;AAAA,eAE1E,OAAOR,EAAe,mBAAmB,YAAaS,CAAM,CAEhE,CAEO,SAASC,EAAmBC,EAAUC,EAAU,CAC/CA,IAAa,QACbD,EAAWA,EAAS,OAAOE,GAAMA,EAAG,WAAaD,CAAQ,GAE7D,MAAMH,EAASE,EAAS,IAAI,CAAC,CAAC,GAAAG,EAAI,OAAAC,EAAQ,MAAAC,EAAO,MAAAC,EAAO,SAAAL,EAAU,MAAAM,CAAK,IAE5D,uCAAuCJ,CAAE;AAAA,wCAChBC,EAAO,CAAC,CAAC,UAAUC,CAAK;AAAA,iCAC/BA,CAAK;AAAA,4EACsCC,CAAK;AAAA,8CACnCL,CAAQ;AAAA,wCACdM,CAAK;AAAA,OAExC,EAAE,KAAK,EAAE,EACVjB,EAAa,mBAAmB,YAAaQ,CAAM,CACvD,CAEO,SAASU,EAAc,CAAC,OAAAJ,EAAQ,MAAAC,EAAO,MAAAE,EAAO,KAAAE,EAAM,YAAAC,EAAa,oBAAAC,EAAqB,aAAAC,CAAY,EAAG,CACxG,MAAMC,EAAaJ,EAAK,IAAIP,GAAM,UAAUA,CAAE,WAAW,EAAE,KAAK,EAAE,EAC5DJ,EACF,wCAAwCM,EAAO,CAAC,CAAC,UAAUC,CAAK;AAAA;AAAA,kDAEtBA,CAAK;AAAA,kDACLQ,CAAU;AAAA,wDACJH,CAAW;AAAA,2EACQC,CAAmB;AAAA,yEACrBC,CAAY;AAAA,yDAC5BL,CAAK;AAAA;AAAA;AAAA,EAI1Df,EAAsB,mBAAmB,YAAaM,CAAM,CAChE,CCzCO,MAAMgB,EAAc,CACvB,KAAM,CACV,ECGAC,EAAM,SAAS,QAAU,iCAElB,SAASC,GAAkB,CAC9BD,EAAM,IAAI,gBAAgB,EACzB,KAAKE,GAAYA,EAAS,KAAK,QAAQf,GAAM,CAC1CN,EAAqBM,CAAE,CAC/B,CAAK,CAAC,EACD,MAAMgB,GAAS,CACR,QAAQ,MAAM,iCAAkCA,CAAK,EACrD,MAAM,iFAAiF,CACnG,CAAS,CACT,CAEO,SAASC,GAAoB,CAChCJ,EAAM,IAAI,mBAAmBD,EAAY,KAAO,GAAI,EAAE,EAAE,EACnD,KAAKG,GAAY,CACdtB,EAAY,UAAU,IAAI,WAAW,EACrCI,EAAmBkB,EAAS,KAAK,SAAU,KAAK,EACpC,KAAK,KAAKA,EAAS,KAAK,MAAQ,EAAE,EAClCH,EAAY,MACpBnB,EAAY,UAAU,OAAO,WAAW,CAExD,CAAS,EACA,MAAMuB,GAAS,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,EACnD,MAAM,+EAA+E,CACjG,CAAS,CAET,CAEO,SAASE,EAAcnB,EAAU,CACpCc,EAAM,IAAI,aAAad,CAAQ,mBAAmBa,EAAY,KAAO,GAAI,EAAE,EAAE,EACxE,KAAKG,GAAY,CAEd,GADAtB,EAAY,UAAU,IAAI,WAAW,EACjCsB,EAAS,KAAK,SAAS,SAAW,EAAG,CACrC1B,EAAe,UAAU,IAAI,oBAAoB,EACjD,MAEhB,CAAYA,EAAe,UAAU,OAAO,oBAAoB,EACpDQ,EAAmBkB,EAAS,KAAK,SAAUhB,CAAQ,EACvC,KAAK,KAAKgB,EAAS,KAAK,MAAQ,EAAE,EAClCH,EAAY,MACpBnB,EAAY,UAAU,OAAO,WAAW,CAExD,CAAS,EACA,MAAMuB,GAAS,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,EACnD,MAAM,+EAA+E,CACjG,CAAS,CACT,CAEO,SAASG,EAAalB,EAAI,CAC7BY,EAAM,IAAI,IAAIZ,CAAE,EAAE,EACb,KAAKc,GAAYT,EAAcS,EAAS,IAAI,CAAC,EAC7C,MAAMC,GAAS,CACZ,QAAQ,MAAM,8BAA+BA,CAAK,EAClD,MAAM,8EAA8E,CAChG,CAAS,CAET,CAEO,SAASI,EAAYC,EAAO,CAC/BR,EAAM,IAAI,aAAaQ,CAAK,mBAAmBT,EAAY,KAAO,GAAI,EAAE,EAAE,EACrE,KAAKG,GAAY,CAEd,GADAtB,EAAY,UAAU,IAAI,WAAW,EACjCsB,EAAS,KAAK,SAAS,SAAW,EAAG,CACrC1B,EAAe,UAAU,IAAI,oBAAoB,EACjD,MACH,CACDA,EAAe,UAAU,OAAO,oBAAoB,EACpDQ,EAAmBkB,EAAS,KAAK,SAAU,KAAK,EACpC,KAAK,KAAKA,EAAS,KAAK,MAAQ,EAAE,EAClCH,EAAY,MACpBnB,EAAY,UAAU,OAAO,WAAW,CAExD,CAAS,EACA,MAAMuB,GAAS,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,EACnD,MAAM,+EAA+E,CACjG,CAAS,CAET,CCnFO,SAASM,GAAkB,CAC5BnC,EAAe,cAAc,kBAAkB,EAAE,cAAgB,OAC/DA,EAAe,cAAc,kBAAkB,EAAE,UAAU,IAAI,yBAAyB,CAEhG,CAEO,SAASoC,EAAeC,EAAO,CACnC,MAAMC,EAAQD,EAAM,OAAO,QAAQ,MAAM,EAAE,cAAc,qBAAqB,EAC9EZ,EAAY,KAAO,EACfY,EAAM,OAAO,UAAU,SAAS,wBAAwB,IACzDC,EAAM,MAAQ,GACdrC,EAAa,UAAY,GACzB6B,IAEN,CCbO,SAASS,EAAwBF,EAAO,CAC3C,GAAIA,EAAM,OAAO,UAAY,SAO7B,IAJAZ,EAAY,KAAO,EACnBzB,EAAe,iBAAiB,kBAAkB,EAAE,QAASa,GAAOA,EAAG,UAAU,OAAO,yBAAyB,CAAC,EAElHwB,EAAM,OAAO,UAAU,IAAI,yBAAyB,EAChDA,EAAM,OAAO,cAAgB,MAAO,CACpCpC,EAAa,UAAY,GACzB6B,IACA,MACH,CAED7B,EAAa,UAAY,GACzB8B,EAAcM,EAAM,OAAO,WAAW,EAC1C,CAEO,SAASG,EAAeH,EAAO,CAClC,MAAMI,EAAKJ,EAAM,OAAO,QAAQ,IAAI,EAC/BI,IACLT,EAAaS,EAAG,QAAQ,EAAE,EAC1BrC,EAAe,UAAU,IAAI,gBAAgB,EACjD,CAEO,SAASsC,EAAcL,EAAO,CAGjC,GAFAA,EAAM,eAAc,EACpBZ,EAAY,KAAO,EACfY,EAAM,OAAO,SAAS,YAAY,MAAM,KAAM,IAAK,GAAI,CACvD,MAAM,8BAA8B,EACpCpC,EAAa,UAAY,GACzB6B,IACA,MACH,CACD9B,EAAe,iBAAiB,kBAAkB,EAAE,QAASa,GAAOA,EAAG,UAAU,OAAO,yBAAyB,CAAC,EAClHsB,IACAlC,EAAa,UAAY,GACzBgC,EAAYI,EAAM,OAAO,SAAS,YAAY,KAAK,CACvD,CAEO,SAASM,GAAkB,CAC9B,MAAM/B,EAAW,SAAS,cAAc,0BAA0B,EAAE,YAEpE,GADAa,EAAY,OACRb,IAAa,MAAO,CACpBmB,EAAcnB,CAAQ,EACtB,MAER,CAAI,GAAIP,EAAO,cAAc,OAAO,IAAM,GAAI,CACtC4B,EAAY5B,EAAO,cAAc,OAAO,EAAE,KAAK,EAC/C,MACH,CACDyB,GACJ,CCvDO,SAASc,EAAaP,EAAO,CAC7BA,EAAM,OAAO,UAAU,SAAS,kBAAkB,GACjDjC,EAAe,UAAU,OAAO,gBAAgB,CAExD,CCCAuB,IACAG,IACAK,IAGAnC,EAAe,iBAAiB,QAASuC,CAAuB,EAEhEtC,EAAa,iBAAiB,QAASuC,CAAc,EAErDpC,EAAe,iBAAiB,QAASwC,CAAY,EAErDvC,EAAO,iBAAiB,SAAUqC,CAAa,EAE/CrC,EAAO,iBAAiB,QAAS+B,CAAc,EAE/C9B,EAAY,iBAAiB,QAASqC,CAAe"}