import"./assets/styles-JE8YjOlG.js";import{a as l}from"./assets/vendor-CWxt7QI6.js";const c=document.querySelector(".categories"),n=document.querySelector(".products"),m=document.querySelector(".not-found"),P=document.querySelector(".modal__content"),f=document.querySelector(".modal"),_=document.querySelector(".search-form"),i=document.querySelector(".load-more-btn"),h=document.querySelector(".modal-product__btn--cart"),T=document.querySelector("[data-cart-count]"),y=document.querySelector(".modal-product__btn--wishlist"),H=document.querySelector("[data-wishlist-count]");function M(t){const e=`<li class='categories__item'>   
                  <button type='button' class='categories__btn'>${t}</button>
        </li>`;return c.insertAdjacentHTML("beforeend",e)}function v(t,e){e!=="all"&&(t=t.filter(d=>d.category===e));const a=t.map(({id:d,images:b,title:g,brand:L,category:S,price:C})=>`<li class="products__item" data-id="${d}">
    <img class="products__image" src="${b[0]}" alt="${g}"/>
    <p class="products__title">${g}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${L}</span></p>
    <p class="products__category">Category: ${S}</p>
    <p class="products__price">Price: ${C}$</p>
 </li>`).join("");n.insertAdjacentHTML("beforeend",a)}function k({id:t,images:e,title:a,price:d,tags:b,description:g,shippingInformation:L,returnPolicy:S}){const C=b.map(E=>`<li><p>${E}</p></li>`).join(""),A=`<div class="js-modal-product-container" data-id=${t}>
            <img class="modal-product__img" src="${e[0]}" alt="${a}" />
            <div class="modal-product__content">
                <p class="modal-product__title">${a}</p>
                <ul class="modal-product__tags">${C}</ul>
                <p class="modal-product__description">${g}</p>
                <p class="modal-product__shipping-information">Shipping: ${L}</p>
                <p class="modal-product__return-policy">Return Policy: ${S}</p>
                <p class="modal-product__price">Price: ${d}$</p>
                <button class="modal-product__buy-btn" type="button">Buy</button>
            </div>
        </div>
        
`;P.insertAdjacentHTML("beforeend",A)}const r={page:1},o={products:JSON.parse(localStorage.getItem("cart"))||[]},s={products:JSON.parse(localStorage.getItem("wishlist"))||[]};l.defaults.baseURL="https://dummyjson.com/products";function j(){l.get("/category-list").then(t=>t.data.forEach(e=>{M(e)})).catch(t=>{console.error("Error loading categories data:",t),alert("Unfortunately, the categories data could not be loaded. Please try again later.")})}function p(){l.get(`?limit=12&skip=${(r.page-1)*12}`).then(t=>{i.classList.add("is-hidden"),v(t.data.products,"all"),Math.ceil(t.data.total/12)>r.page&&i.classList.remove("is-hidden")}).catch(t=>{console.error("Error loading products data:",t),alert("Unfortunately, the products data could not be loaded. Please try again later.")})}function q(t){l.get(`/category/${t}?limit=12&skip=${(r.page-1)*12}`).then(e=>{if(i.classList.add("is-hidden"),e.data.products.length===0){m.classList.add("not-found--visible");return}m.classList.remove("not-found--visible"),v(e.data.products,t),Math.ceil(e.data.total/12)>r.page&&i.classList.remove("is-hidden")}).catch(e=>{console.error("Error loading category data:",e),alert("Unfortunately, the category data could not be loaded. Please try again later.")})}function w(t){l.get(`/${t}`).then(e=>k(e.data)).catch(e=>{console.error("Error loading product data:",e),alert("Unfortunately, the product data could not be loaded. Please try again later.")})}function x(t){l.get(`/search?q=${t}&limit=12&skip=${(r.page-1)*12}`).then(e=>{if(i.classList.add("is-hidden"),e.data.products.length===0){m.classList.add("not-found--visible");return}m.classList.remove("not-found--visible"),v(e.data.products,"all"),Math.ceil(e.data.total/12)>r.page&&i.classList.remove("is-hidden")}).catch(e=>{console.error("Error loading products data:",e),alert("Unfortunately, the products data could not be loaded. Please try again later.")})}function $(){c.querySelector(".categories__btn").textContent==="all"&&c.querySelector(".categories__btn").classList.add("categories__btn--active")}function N(t){const e=t.target.closest("form").querySelector(".search-form__input");t.target.classList.contains("search-form__btn-clear")&&(r.page=1,e.value="",n.innerHTML="",c.querySelectorAll(".categories__btn").forEach(a=>a.classList.remove("categories__btn--active")),$(),p())}function B(t){if(o.products.includes(t)){h.textContent="Remove from Cart";return}h.textContent="Add to Cart"}function O(t){if(s.products.includes(t)){y.textContent="Remove from Wishlist";return}y.textContent="Add to Wishlist"}function u(){let t,e;try{t=JSON.parse(localStorage.getItem("cart")),Array.isArray(t)||(t=[])}catch{t=[]}try{e=JSON.parse(localStorage.getItem("wishlist")),Array.isArray(e)||(e=[])}catch{e=[]}T.textContent=t.length,H.textContent=e.length}function I(t){if(t.target.tagName==="BUTTON"){if(r.page=1,c.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),t.target.classList.add("categories__btn--active"),t.target.textContent==="all"){n.innerHTML="",p();return}n.innerHTML="",q(t.target.textContent)}}function J(t){const e=t.target.closest("li");e&&(B(e.dataset.id),O(e.dataset.id),w(e.dataset.id),f.classList.add("modal--is-open"))}function U(t){if(t.preventDefault(),r.page=1,t.target.elements.searchValue.value.trim()===""){alert("Please, enter a search term!"),n.innerHTML="",p();return}c.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),$(),n.innerHTML="",x(t.target.elements.searchValue.value)}function R(){const t=document.querySelector(".categories__btn--active").textContent;if(r.page++,t!=="all"){q(t);return}if(_.querySelector("input")!==""){x(_.querySelector("input").value);return}p()}function W(t){if(t.target.classList.contains("modal__close-btn")&&(f.classList.remove("modal--is-open"),f.querySelector(".js-modal-product-container").remove()),t.target.classList.contains("modal-product__btn--cart")){const e=t.currentTarget.querySelector(".js-modal-product-container").dataset.id;if(o.products.includes(e)){o.products=o.products.filter(a=>a!==e),localStorage.setItem("cart",JSON.stringify(o.products)),u(),h.textContent="Add to Cart";return}o.products.push(e),localStorage.setItem("cart",JSON.stringify(o.products)),u(),h.textContent="Remove from Cart"}if(t.target.classList.contains("modal-product__btn--wishlist")){const e=t.currentTarget.querySelector(".js-modal-product-container").dataset.id;if(s.products.includes(e)){s.products=s.products.filter(a=>a!==e),localStorage.setItem("wishlist",JSON.stringify(s.products)),u(),y.textContent="Add to Wishlist";return}s.products.push(e),localStorage.setItem("wishlist",JSON.stringify(s.products)),u(),y.textContent="Remove from Wishlist"}}j();p();$();u();c.addEventListener("click",I);n.addEventListener("click",J);f.addEventListener("click",W);_.addEventListener("submit",U);_.addEventListener("click",N);i.addEventListener("click",R);
//# sourceMappingURL=index.js.map
